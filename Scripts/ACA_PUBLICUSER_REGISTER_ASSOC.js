 var publicUser = aa.env.getValue("PublicUserModel");var contactType = "Citizen";if (publicUser != null){	aa.print(publicUser.getServProvCode() + "  " + publicUser.getSsn() + "  "			+ publicUser.getFein() + "  " + publicUser.getEmail() + " "			+ publicUser.getFirstName() + " " + publicUser.getLastName());		var refContact = getExistingRefContact(publicUser);		var refContactSeqNbr;	if (refContact == null)	{		// Create Reference Contact.		refContactSeqNbr = createRefContact(contactType, publicUser);	}	else	{		refContactSeqNbr = refContact.getContactSeqNumber();	}		// Assocate Reference Contact.	associateContact(publicUser.getUserSeqNum(), refContactSeqNbr);	aa.print("-------- Finished. ---------");}function getExistingRefContact(publicUser){	var newPeople = aa.people.createPeopleModel().getOutput().getPeopleModel();	newPeople.setServiceProviderCode(publicUser.getServProvCode());	newPeople.setFein(publicUser.getFein());	newPeople.setSocialSecurityNumber(publicUser.getSsn());	newPeople.setFirstName(publicUser.getFirstName());	newPeople.setLastName(publicUser.getLastName());		var result = aa.people.getPeopleByPeopleModel(newPeople);	if (result.getOutput() != null && result.getOutput().length > 0)	{		aa.print("Retrive Ref Contacts length = " + result.getOutput().length);		refPeople = result.getOutput()[0];		aa.print("[Object 0] = " + refPeople + "   ContactSeqNbr = " + refPeople.getContactSeqNumber());		return result.getOutput()[0];	}	else	{		return null;	}}function createRefContact(contactType, publicUser){	aa.print("---------Create Ref Contact-------------");	var people = aa.people.createPeopleModel().getOutput().getPeopleModel();	people.setServiceProviderCode(publicUser.getServProvCode());	people.setContactType(contactType);	people.setFullName(publicUser.getFullName());	people.setBusinessName(publicUser.getBusinessName());	people.setTitle(publicUser.getUserTitle());	people.setFirstName(publicUser.getFirstName());	people.setMiddleName(publicUser.getMiddleName());	people.setLastName(publicUser.getLastName());	people.setFax(publicUser.getFax());	people.setEmail(publicUser.getEmail());	people.getCompactAddress().setZip(publicUser.getZip());	people.getCompactAddress().setAddressLine1(publicUser.getAddress());	people.getCompactAddress().setAddressLine2(publicUser.getAddress2());	people.getCompactAddress().setAddressLine3(null);	people.getCompactAddress().setCity(publicUser.getCity());	people.getCompactAddress().setCountry(publicUser.getCountry());	people.getCompactAddress().setState(publicUser.getState());	people.getCompactAddress().setStreetName(null);	people.getCompactAddress().setCountryCode(publicUser.getCellPhoneCountryCode());	people.setSocialSecurityNumber(publicUser.getSsn());	people.setFein(publicUser.getFein());	aa.people.createPeople(people);	aa.print("---------Create Ref Contact [" + people.getContactSeqNumber() + "]: Success -------------");	return people.getContactSeqNumber();}function associateContact(publicUserSeqNbr, contactSeqNbr){	aa.print("---------PublicUser link to Ref Contact-------------");	aa.licenseScript.associateContactWithPublicUser(publicUserSeqNbr, contactSeqNbr);	aa.print("---------PublicUser [" + publicUserSeqNbr + "] link to Ref Contact ["+ contactSeqNbr +"] : Success -------------");}